

{% extends 'base.html' %}

	{% block content %}

  {% load staticfiles %}
<!-- found how to make the advanced search form here: https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_popup_form-->
  <style>
.open-advanced{
  background-color: #555;
  color: white;
  padding: 16px 20px;
  border: none;
  cursor: pointer;
  opacity: 0.8;
  position: fixed;
  bottom: 23px;
  right: 28px;
  width: 280px;
}

.form-advanced{
  display: none;
  position: fixed;
  bottom: 0;
  right: 15px;
  border: 3px solid #f1f1f1;
  z-index: 9;
}

.form-container {
  max-width: 300px;
  padding: 10px;
  background-color: white;
}

.form-container input[type=text]:focus, .form-container input[type=password]:focus {
  background-color: #ddd;
  outline: none;
}

.form-container input[type=text], .form-container input[type=password] {
  width: 100%;
  padding: 15px;
  margin: 5px 0 22px 0;
  border: none;
  background: #f1f1f1;
}

.form-container .btn {
  background-color: #4CAF50;
  color: white;
  padding: 16px 20px;
  border: none;
  cursor: pointer;
  width: 100%;
  margin-bottom:10px;
  opacity: 0.8;
}

.form-container .btn:hover, .open-button:hover {
  opacity: 1;
}

</style>

  <div class="apartments_background_image"></div>

  <div class="apartments_content_container" id="outer_container_apartments">


    <div class="container, apartments_div">

      <div class="row" id="top_row_apartments">


        <!-- <div class="col"> -->
          
        <!-- </div> -->
        <div class="col" id="apartments_image_div">
          <!-- <input type="link" class="btn btn-default" id="advanced_search" value="Advanced Search"> -->

          <div id="search_bar_div">

            <form action="/apartments" id="search_bar_apartments" method="get">
              <div class="input-group mb-3">
                <input type="text" class="form-control" name="search" placeholder="Search" id="search_bar_id_apartments">
                <div class="input-group-append">
                  <input type="submit" class="btn btn-primary" id="search_button_apartments" value="Search">
                </div>
              </div>
            </form>
          </div>

          <div id="filtering">
              <button class="open-button" onclick="openForm()">Open Form</button>
              <div class="form-popup" id="myForm">
                <form action="/action_page.php" class="form-container">
                    <h1>Login</h1>
                 <label for="price-filtering"><b>Price</b></label>
                 <input type="text" placeholder="Enter Email" name="email" required>
                    <label for="bedrooms-filtering"><b>Bedrooms</b></label>
                  <input type="password" placeholder="Enter Password" name="psw" required>
                 <button type="submit" class="btn">Login</button>
                    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
  </form>
</div>

<script>
function openForm() {
  document.getElementById("myForm").style.display = "block";
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
}
</script>

          </div>

        </div>

      </div>
      <div class="row justify-content-md-center" id="middle_row_apartments">



        <div class="col-md-auto" id="main_col_left_apartments">

          <!--Adding Maps-->

             <div id="map"></div>
             <!-- Meg, the map script is now in static/javascript for readability sake -->
             <script src="{% static "javascript/map.js"%}"></script>

                <script async defer
                src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBnnca1doBE-nE14750VNFA4VtqlLrcJZk&callback=initMap">
                </script>

        </div>
        <div class="col-md-auto" id="main_col_right_apartments">

          <div class="container, apartments_div_detail">

          {% for apartment in apartments %}

                <div class="row apartmentname">

                  <div class="col-md-auto" id="left_display" align="center">
                    <a href="{% url 'apartment_detail' apartment.id %}">
                      <img src="{{ apartment.image }}" id="apartment_thumbnail">
                    </a>
                  </div>

                  <div class="col-md-auto" id="right_display" align="center">

                    
                    <a href="{% url 'apartment_detail' apartment.id %}">
                      <h4 id="apartment_link"> {{ apartment.name|capfirst }} </h4>
                    </a>

                    <h5 id="apartment_price">{{ apartment.price }}</h5>

                    {% if user and not user.is_anonymous %}
                    <form action="{% url 'save_favorite' apartment.id %}" method="post">
                      {% csrf_token %}
                      <button type="submit" class="btn btn-default" name="fav_apartment" id="fav_apartment{{ forloop.counter }}"> Save to Favorites </button>
                    </form>
                    {% endif %}
                    {% if user and not user.is_anonymous %}
                    <form action="{% url 'save_compare' apartment.id %}" method="post">
                      {% csrf_token %}
                      <button type="submit" class="btn btn-default" name="compare_apartment" id="compare_apartment{{ forloop.counter }}"> Select to Compare </button>
                    </form>
                  </div>

                </div>


              {% endif %}

          {% endfor %}

          </div>

      {% if not apartments %}
            <div>
              <center>No Results.</center>
            </div>

          {% endif %}



          <div class="inner_content_div_apartments">

          </div>

              

          

        </div>
<!--        <div class="col" id="right_outer_col">
    
        </div> -->
      </div>

    </div>

  </div>


  <!-- OLD CODE STUFF -->


		<div class='gotocompare'align="right" style="...">
			<form action="{% url 'compare' %}">
					{% csrf_token %}
					<button type="submit" class="btn btn-default" name="compare" id="gotocompare"> Go to Compare Page </button>
			</form>
		</div>



	{% endblock content %}
